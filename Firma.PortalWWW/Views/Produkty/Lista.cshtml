@model Firma.PortalWWW.ViewModels.ProduktListaViewModel

@{
    ViewData["Title"] = "Lista produktów";
}


<div class="container mt-5">
    <div class="row">
        <!-- Filtry i Kategorie -->
        <div class="col-md-3">
            <h4>Filtry</h4>
            <form method="get" asp-controller="Produkty" asp-action="Lista">
                <div class="mb-3">
                    <label for="categoryFilter" class="form-label">Kategoria</label>
                    <select class="form-select" id="categoryFilter" name="kategoriaId">
                        <option value="">Wszystkie</option>
                        @foreach (var kat in Model.Kategorie)
                        {
                            <option value="@kat.Id">@kat.Nazwa</option>
                        }
                    </select>
                </div>

                <div class="mb-3">
                    <label for="priceFilter" class="form-label">Cena maksymalna</label>
                    <input type="range" class="form-range" id="priceFilter" name="cenaMax"
                           min="0" max="1000" step="25"
                           value="@(Model.CenaMaksymalna ?? 10000)">
                    <p><small id="priceOutput">Cena: @(Model.CenaMaksymalna ?? 10000) zł</small></p>
                </div>

                <button type="submit" class="btn btn-primary">Zastosuj filtry</button>
            </form>

        </div>
        <!-- Lista produktów -->
        <div class="col-md-9">
            <h2 class="text-start mb-4">Produkty</h2>
            <div class="row">
                @foreach (var produkt in Model.Produkty)
                {
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
                        <div class="card">
                            <img src="@produkt.ZdjecieUrl" class="card-img-top" alt="@produkt.Nazwa">
                            <div class="card-body">
                                <h5 class="card-title">@produkt.Nazwa</h5>
                                <p class="card-text">@(produkt.Opis.Length > 50 ? produkt.Opis.Substring(0, 40) + "..." : produkt.Opis)</p>
                                <a href="@Url.Action("Szczegoly", "Produkty", new { id = produkt.Id })" class="btn btn-primary">Zobacz więcej</a>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>
</div>

<script>
    const priceFilter = document.getElementById('priceFilter');
    const priceOutput = document.getElementById('priceOutput');

    priceFilter.addEventListener('input', function () {
        priceOutput.textContent = `Cena: ${priceFilter.value} zł`;
    });
</script>


